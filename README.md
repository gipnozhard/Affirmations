# Affirmations

# Используйте RecyclerView для отображения прокручиваемого списка

1. Прежде чем вы начнете

Если вспомнить приложения, которыми вы обычно пользуетесь на своем телефоне, то почти в каждом отдельном приложении есть хотя бы один список. На экране журнала вызовов, в приложении "Контакты" и в вашем любимом приложении для социальных сетей отображается список данных. Как показано на скриншоте ниже, некоторые из этих приложений отображают простой список слов или фраз, в то время как другие отображают более сложные элементы, такие как карточки с текстом и изображениями. Независимо от содержимого, отображение списка данных является одной из наиболее распространенных задач пользовательского интерфейса в Android.

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/547871b8-0f4b-4341-9ff9-931311e06018)

Чтобы помочь вам создавать приложения со списками, Android предоставляет RecyclerView. RecyclerView разработан таким образом, чтобы быть очень эффективным даже при работе с большими списками за счет повторного использования просмотров, которые были прокручены за пределы экрана. Когда элемент списка прокручивается за пределами экрана, RecyclerView повторно использует это представление для следующего элемента списка, который должен быть отображен. Это означает, что элемент заполняется новым содержимым, которое прокручивается на экране. Такое RecyclerView поведение значительно экономит время обработки и помогает спискам прокручиваться более плавно.

В последовательности, показанной ниже, вы можете видеть, что одно представление было заполнено данными, ABC. После того, как это представление исчезнет с экрана, RecyclerView повторно используйте его для получения новых данных XYZ.

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/734cffa0-eb99-4a9f-940f-cfe7743eb006)


В этой кодовой лаборатории вы создадите приложение "Аффирмации". "Аффирмации" - это простое приложение, которое отображает десять положительных аффирмаций в виде текста в прокручиваемом списке. Затем, в последующей codelab, вы сделаете еще один шаг вперед, добавите вдохновляющее изображение к каждой аффирмации и усовершенствуете пользовательский интерфейс приложения.

### Предварительные требования

 * Создайте проект на основе шаблона в Android Studio.

 * Добавьте строковые ресурсы в приложение.

 * Определите макет в XML.

 * Разберитесь в классах и наследовании в Kotlin (включая абстрактные классы).

 * Наследуйте от существующего класса и переопределяйте его методы.
Используйте документацию по developer.android.com для классов, предоставляемых платформой Android.

### Что вы узнаете

 * Как использовать RecyclerView для отображения списка данных.

 * Как организовать ваш код в пакеты

 * Как использовать адаптеры с RecyclerView для настройки внешнего вида отдельного элемента списка.

### Что вы будете создавать

 * Приложение, которое отображает список строк подтверждения с помощью RecyclerView.

### Что вам нужно

 * На компьютере установлена Android Studio версии 4.1 или выше.

## 2. Создание проекта

### Создайте пустой проект Activity

Перед созданием нового проекта убедитесь, что вы используете Android Studio 4.1 или выше.

 1. Запустите новый проект Kotlin в Android Studio, используя пустой шаблон Activity.

 2. Введите утверждения в качестве названия приложения, com.example.affirmations в качестве имени пакета и выберите уровень API 19 в качестве минимального SDK.

 3. Нажмите Готово, чтобы создать проект.


## 3. Настройка списка данных

Следующим шагом в создании приложения Affirmations является добавление ресурсов. Вы добавите в свой проект следующее.

 * Строковые ресурсы для отображения в приложении в виде утверждений.

 * Источник данных для предоставления списка подтверждений вашему приложению.

-----------------------------------------------------------
Примечание: В большинстве производственных проектов для Android данные аффирмаций извлекаются из базы данных или с сервера. Сети и базы данных выходят за рамки этой кодовой лаборатории, поэтому вы будете использовать список строк утверждений, определенных внутри приложения.
-----------------------------------------------------------

### Добавьте строки подтверждения

 1. В окне Project откройте app> res> values> strings.xml . В данный момент у этого файла есть единственный ресурс, который является именем приложения.
 
 2. В strings.xml добавьте следующие утверждения в качестве отдельных строковых ресурсов. Назовите их affirmation1, affirmation2 и так далее.

Текст аффирмации

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/a5f8bd54-49cc-4f9a-853f-394e3013f0c0)

strings.xmlФайл должен выглядеть следующим образом, когда вы закончите.

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/1ff7c98c-29e8-4223-8024-a5119a21240e)

Теперь, когда вы добавили строковые ресурсы, вы можете ссылаться на них в своем коде как R.string.affirmation1 или R.string.affirmation2.

## Создайте новый пакет

Логическая организация вашего кода помогает вам и другим разработчикам понимать, поддерживать и расширять его. Точно так же, как вы можете упорядочивать документы по файлам и папкам, вы можете упорядочить свой код по файлам и пакетам.

### Что такое пакет?

 1. В Android Studio в окне "Проект" (Android) просмотрите файлы вашего нового проекта в разделе "приложение> java" для приложения "Аффирмации". Они должны выглядеть так, как показано на скриншоте ниже, на котором показаны три пакета: один для вашего кода (com.example.affirmations) и два для тестовых файлов (com.example.affirmations (androidTest) и com.example.affirmations (test)).

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/570cdb49-75f7-4e50-ad28-2b3ecdee98f6)

 2. Обратите внимание, что название пакета состоит из нескольких слов, разделенных точкой.

Вы можете использовать пакеты двумя способами.

 * Создавайте разные пакеты для разных частей вашего кода. Например, разработчики часто разделяют классы, работающие с данными, и классы, создающие пользовательский интерфейс, в разные пакеты.

 * Используйте в своем коде код из других пакетов. Чтобы использовать классы из других пакетов, вам необходимо определить их в зависимостях вашей системы сборки. Также это стандартная практика использования import их в вашем коде, поэтому вы можете использовать их сокращенные имена (например, TextView) вместо их полных имен (например, android.widget.TextView). Например, вы уже использовали import инструкции для таких классов, как sqrt (import kotlin.math.sqrt) и View (import android.view.View).

В приложении Affirmations, помимо импорта классов Android и Kotlin, вы также разделите свое приложение на несколько пакетов. Даже если у вас не так много классов для вашего приложения, рекомендуется использовать пакеты для группировки классов по функциональности.

 ### Именование пакетов
Имя пакета может быть любым, если оно уникально во всем мире; ни один другой опубликованный пакет в любом месте не может иметь такого же имени. Поскольку существует очень большое количество пакетов, а придумать случайные уникальные имена сложно, программисты используют соглашения, чтобы упростить создание и понимание названий пакетов.

 * Название пакета обычно структурировано от общего к определенному, причем каждая часть названия написана строчными буквами и разделена точкой. Важно: точка - это всего лишь часть названия. Это не указывает на иерархию в коде и не определяет структуру папок!

 * Поскольку интернет-домены уникальны во всем мире, принято использовать домен, обычно ваш или домена вашей компании, в качестве первой части имени.

 * Вы можете выбрать названия пакетов, чтобы указать, что находится внутри пакета, и как пакеты связаны друг с другом.

 * Для примеров кода, подобных этому, com.example обычно используется название приложения, за которым следует.

Вот несколько примеров предопределенных названий пакетов и их содержимого:

 * kotlin.math - Математические функции и константы.

 * android.widget - Просмотры, такие какTextView.

---------------------------------------------------------------
Примечание: Хотя названия пакетов (и их расположение в окне Android Project Android Studio в виде иерархии папок) отображаются в виде иерархии, фактической иерархии в исполняемом коде нет. Точно так же, как система нумерации в библиотеке классифицирует и упорядочивает книги, все они по-прежнему находятся на одной полке, и вы можете взять любую из них.
---------------------------------------------------------------

### Создайте пакет

 1. В Android Studio на панели "Проект" щелкните правой кнопкой мыши приложение > java > com.example.affirmations и выберите Создать > Пакет.

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/2444e092-40b2-468b-8487-a309ed253e70)

 2. Во всплывающем окне "Новый пакет" обратите внимание на предлагаемый префикс имени пакета. Предлагаемая первая часть имени пакета - это название пакета, который вы щелкнули правой кнопкой мыши. Хотя названия пакетов не создают иерархию пакетов, повторное использование частей названия используется для указания взаимосвязи и организации содержимого!
 
 3. Во всплывающем окне добавьте model в конец предлагаемого названия пакета. Разработчики часто используют model в качестве имени пакета для классов, которые моделируют (или представляют) данные.

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/e7046f05-79d2-4adb-af31-d4799abd16b1)

 4. Нажмите Enter. При этом будет создан новый пакет под названием com.example.affirmations (root). Этот новый пакет будет содержать все классы, связанные с данными, определенные в вашем приложении.

### Создайте класс данных подтверждения

В этой задаче вы создадите класс с именем, Affirmation. экземпляр объекта Affirmation которого представляет одно подтверждение и содержит идентификатор ресурса строки с подтверждением.

 5. Щелкните правой кнопкой мыши на пакете com.example.affirmations.model и выберите Создать > Файл / класс Kotlin.

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/d51ce888-40e8-4628-ae8f-36bdf7b4a0b8)

 6. Во всплывающем окне выберите класс и введите Affirmation в качестве имени класса. При этом будет создан новый файл с именем Affirmation.kt в model пакете.

 7. Создайте Affirmation класс данных, добавив data ключевое слово перед определением класса. В результате вы получите сообщение об ошибке, поскольку в классах данных должно быть определено хотя бы одно свойство.

Affirmation.kt

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/97f0d9ef-69a1-4f09-9557-cda796274668)

Когда вы создаете экземпляр Affirmation, вам необходимо передать идентификатор ресурса для строки подтверждения. Идентификатор ресурса является целым числом.

 8. Добавьте val целочисленный параметр stringResourceId в конструктор Affirmation класса. Это избавит вас от вашей ошибки.

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/59f403be-d728-41a3-b47e-f90e2499c04c)

### Создайте класс в качестве источника данных

Данные, отображаемые в вашем приложении, могут поступать из разных источников (например, из вашего проекта приложения или из внешнего источника, для загрузки которого требуется подключение к Интернету). В результате данные могут быть представлены не в том формате, который вам нужен. Остальная часть приложения не должна заботиться о том, откуда берутся данные или в каком формате они изначально представлены. Вы можете и должны скрыть эту подготовку данных в отдельном Datasource классе, который подготавливает данные для приложения.

Поскольку подготовка данных - это отдельная задача, поместите Datasource класс в отдельный пакет data.

 1. В Android Studio в окне Проекта щелкните правой кнопкой мыши приложение > java > com.example.affirmations и выберите Создать > Пакет.

 2. Введите data в качестве последней части названия пакета.

 3. Щелкните правой кнопкой мыши на data пакете и выберите новый файл / класс Kotlin.

 4. Введите Datasource в качестве имени класса.

 5. Внутри Datasource класса создайте функцию с именем loadAffirmations().

loadAffirmations()Функция должна возвращать список Affirmations. Вы делаете это, создавая список и заполняя его Affirmation экземпляром для каждой строки ресурса.

 6. Объявите List<Affirmation> в качестве возвращаемого типа метода loadAffirmations().

 7. В теле loadAffirmations()добавьте return инструкцию.

 8. После return ключевого слова вызовите listOf<>(), чтобы создать List.

 9. Внутри угловых скобок <> укажите тип элементов списка как Affirmation. При необходимости импортируйте com.example.affirmations.model.Affirmation.

 10. Внутри круглых скобок создайте Affirmation, передав R.string.affirmation1 в качестве идентификатора ресурса, как показано ниже.

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/67bd7558-ffb1-4901-ae32-f0d491c1d049)

 11. Добавьте оставшиеся Affirmation объекты в список всех утверждений, разделенных запятыми. Готовый код должен выглядеть следующим образом.

Datasource.kt

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/69a9c5ce-a2f7-467b-89a2-87acb43a22ec)

### [Необязательно] Отображение размера списка подтверждений в текстовом представлении

Чтобы убедиться, что вы можете создать список утверждений, вы можете вызвать loadAffirmations() и отобразить размер возвращаемого списка утверждений в TextView шаблоне приложения Empty Activity, который поставляется вместе с вашим пустым приложением Activity.

 1. В layouts/activity_main.xmlукажитеTextView, что поставляется с вашим шаблоном, id of textview.

 2. В MainActivity в onCreate() методе после существующего кода получите ссылку на textview.

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/0d4e9caf-bdaf-4bfa-928e-4484a2fa174c)

 3. Затем добавьте код для создания и отображения размера списка подтверждений. Создайте Datasource, вызовите loadAffirmations(), получите размер возвращаемого списка, преобразуйте его в строку и назначьте в качестве text of textView.

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/a6784ff4-bb4d-4435-bf8b-5e5472de5056)

 4. Запустите свое приложение. Экран должен выглядеть так, как показано ниже.

![image](https://github.com/gipnozhard/Affirmations/assets/71705375/97ccf8f9-1aa2-46df-b0bc-cb3d954e0f4d)

 5. Удалите код, который вы только что добавили в MainActivity.























